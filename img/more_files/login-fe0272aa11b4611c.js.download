(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9861],{19401:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/login",function(){return t(85513)}])},33462:function(e,n,t){"use strict";t.d(n,{W:function(){return c}});var r=t(70865),o=t(66383),s=t(52322),i=t(2784),a=t(13980),l=t.n(a),u=t(19757),c=function(e){var n=(0,o.Z)((0,i.useState)(!1),2),t=n[0],a=n[1],l=function(){a(function(e){return!e})};return(0,s.jsx)(u.I,(0,r.Z)({type:t?"text":"password",leftIcon:t?"visibilityOff":"visibilityOn",leftIconOnClick:function(e){e.stopPropagation(),l()}},e))};c.propTypes={label:l().string,className:l().string,helper:l().string,error:l().oneOfType([l().string,l().bool]),isRequired:l().bool,disabled:l().bool,form:l().any}},85513:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return F}});var r=t(2784),o=t(52322),s=t(70865),i=t(66383),a=t(13980),l=t.n(a),u=t(31883),c=t(19757),d=t(57931),p=t(59437),m=t(45227),f=t(1324),h=t(64248),v={password:u.eo.PASSWORD,otp:u.eo.OTP},g=(0,f.q)({type:m.XN.POST,url:"user/authenticate/",transformer:function(e){var n=e.data;return(0,h.Y)({hasPassword:n.has_password,hasAccount:n.has_account,loginMethod:v[n.login_method],timer:n.sms_ttl,username:n.phone})},inputTransformer:function(e){return{username:(null==e?void 0:e.username)||(null==e?void 0:e.phone),otp_call:(null==e?void 0:e.otpCall)||!1,force_send_otp:null==e?void 0:e.forceSendOtp}}}),x=t(11559),N=t(49291),w=t(27768),j=t(3463),S=t(16137),y=function(e){var n=e.setStep,t=e.setResponse,r=e.setUsername,s=(0,x.E)({apiMethod:g}),i=s.request,a=s.pending;return(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("h1",{className:"text-h4 color-900 align-right w-full mt-4",children:"ورود | ثبت‌نام"}),(0,o.jsx)("p",{className:"text-body-2 color-700 mt-4 align-right w-full",children:"سلام!"}),(0,o.jsx)("p",{className:"text-body-2 color-700 mb-4 align-right w-full",children:"لطفا شماره موبایل یا ایمیل خود را وارد کنید"}),(0,o.jsx)(S.l,{useFormProps:{mode:"onBlur"},onSubmit:function(e){r(e.username.trim()),i({username:e.username.trim()}).then(function(e){if(t(e),!e.hasAccount)return n(u.wN.register);n(e.loginMethod===u.eo.PASSWORD?u.wN.password:u.wN.otp)})},items:[{component:(0,o.jsx)(c.I,{autoFocus:!0,inputWrapperProps:{fullWidth:!0}}),name:"username",defaultValue:"",rules:{required:w.Qt,validate:N.jI}},{component:(0,o.jsx)(d.z,{type:"submit",color:"red",size:"large",mode:"filled",className:"w-full mt-6 mt-8-lg text-button-1",isLoading:a,CROId:"login-register",children:"ورود"})}]}),(0,o.jsxs)("p",{className:"text-caption color-700 mt-4",children:["ورود شما به معنای پذیرش",(0,o.jsx)(p.e,{mode:"link",href:j.A2,className:"mx-1 d-inline-block color-secondary-700",children:"شرایط دیجی‌کالا"}),"و",(0,o.jsx)(p.e,{mode:"link",href:j.SL,className:"mx-1 d-inline-block color-secondary-700",children:"قوانین حریم‌خصوصی"}),"است"]})]})};y.propTypes={setStep:l().func,setResponse:l().func};var b=t(98780),M=t(79130),_=t(98932),C=t(77506),P=t(73076),R=t(52216),L=t(90644),O=t(64952),I=function(e){var n,t=e.response,s=e.setStep,a=e.setResponse,l=(0,i.Z)((0,r.useState)(""),2),c=l[0],p=l[1],m=(0,M.J)({action:C.y}),f=m.request,h=m.pending,v=(0,x.E)({apiMethod:g}),j=v.request,y=v.pending,I=(0,r.useRef)(new Date),T=(0,_.c)(),k=T.ref,D=T.submit;return(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("h1",{className:"text-h4 color-900 align-right w-full mt-4",children:"کد تایید را وارد کنید"}),(0,o.jsx)("p",{className:"text-body-2 color-700 my-4 align-right w-full",children:"کد تایید برای شماره ".concat((0,R.U)(t.username)," پیامک شد")}),(0,o.jsx)(S.l,{ref:k,onSubmit:function(e){f({username:t.username,code:(0,P.d)(e.code),type:u.eo.OTP})},items:[{component:(0,o.jsx)(L.N,{submit:D}),name:"code",defaultValue:"",rules:{validate:{numberValidation:N.AU,length5:function(e){return 5===e.length||w.VP}}}}]}),t.hasPassword&&(0,o.jsxs)(d.z,{mode:"text",color:"blue",size:"small",className:"mt-4",onClick:function(){return s(u.wN.password)},padding:!1,children:["ورود با رمز عبور",(0,o.jsx)(b.J,{icon:"chevronLeft",size:20,color:"secondary"})]}),(0,o.jsx)(O.U,{error:c,endTime:1e3*t.timer+(null===(n=I.current)||void 0===n?void 0:n.getTime()),onResend:function(e){var n=e.otpCall;I.current=new Date,j({username:t.username,forceSendOtp:!0,otpCall:void 0!==n&&n}).then(function(e){a(e)}).catch(function(e){var n;p(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.message)})},isLoading:y}),(0,o.jsx)(d.z,{type:"submit",color:"red",size:"large",mode:"filled",className:"w-full mt-4",isLoading:h,CROId:"login-verification-code",onClick:D,children:"تایید"})]})};I.propTypes={response:l().any,setStep:l().func,setResponse:l().func};var T=t(98742),k=t(35655),D=t(58777),z=t(33462),E=function(e){var n=e.setStep,t=e.setResponse,r=e.response,s=e.username,i=(0,k.e)().redirect,a=(0,M.J)({action:C.y}),l=a.request,c=a.pending,p=(0,x.E)({apiMethod:g}),m=p.request,f=p.pending,h=(0,_.c)(),v=h.ref,N=h.submit;return(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("h1",{className:"text-h4 color-900 align-right w-full my-4",children:"رمز عبور را وارد کنید"}),(0,o.jsx)(S.l,{ref:v,onSubmit:function(e){l({username:s,password:e.password,type:u.eo.PASSWORD}).then(function(e){(null==e?void 0:e.shouldConfirmPhone)&&i({url:j.ih})})},items:[{component:(0,o.jsx)(z.W,{isRequired:!0,helper:" ",autoFocus:!0,inputWrapperProps:{fullWidth:!0}}),name:"password",defaultValue:"",rules:{required:w.gt}}]}),r.username&&(0,o.jsxs)(d.z,{type:"button",mode:"text",color:"blue",size:"small",onClick:function(){m({username:r.username,forceSendOtp:!0}).then(function(e){t(e),n(u.wN.otp)})},className:"mt-3 p-0",padding:!1,isLoading:f,children:["ورود با رمز یک‌بار‌مصرف",(0,o.jsx)(b.J,{icon:"chevronLeft",size:20,color:"secondary"})]}),(0,o.jsxs)(d.z,{type:"button",mode:"text",color:"blue",size:"small",onClick:function(){(0,D.d)(T.x,r.username||s||""),i({url:j.sx})},className:"mt-3 p-0",padding:!1,children:["فراموشی رمز عبور",(0,o.jsx)(b.J,{icon:"chevronLeft",size:20,color:"secondary"})]}),(0,o.jsx)(d.z,{type:"submit",color:"red",size:"large",mode:"filled",className:"w-full mt-8",isLoading:c,onClick:N,children:"تایید"})]})};E.propTypes={response:l().any,setStep:l().func,setResponse:l().func};var A=(0,f.q)({type:m.XN.POST,url:"user/register/confirm/",inputTransformer:function(e){return{username:e.username,code:e.code}}}),Z=function(e){var n=e.response,t=(e.setStep,e.setResponse),s=(0,k.e)().redirect,a=(0,r.useRef)(new Date),l=(0,i.Z)((0,r.useState)(""),2),u=l[0],c=l[1],p=(0,_.c)(),m=p.ref,f=p.submit,h=(0,x.E)({apiMethod:g}),v=h.request,y=h.pending,b=(0,x.E)({apiMethod:A,onSuccess:function(){s({url:j.iR})}}),M=b.request,C=b.pending;return(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("h1",{className:"text-h4 color-900 align-right w-full mt-4",children:"کد تایید را وارد کنید"}),(0,o.jsx)("p",{className:"text-body-2 color-700 my-4 align-right w-full",children:"حساب کاربری با شماره موبایل\n        ".concat((0,R.U)(n.username),"\n        وجود ندارد. برای ساخت حساب جدید،کد تایید برای این شماره ارسال گردید.")}),(0,o.jsx)(S.l,{ref:m,onSubmit:function(e){M({username:n.username,code:e.code})},items:[{component:(0,o.jsx)(L.N,{submit:f}),name:"code",defaultValue:"",rules:{validate:{numberValidation:N.AU,length5:function(e){return 5===e.length||w.VP}}}}]}),(0,o.jsx)(O.U,{error:u,isLoading:y,endTime:1e3*n.timer+a.current.getTime(),onResend:function(e){var r=e.otpCall;a.current=new Date,v({username:n.username,forceSendOtp:!0,otpCall:void 0!==r&&r}).then(function(e){t(e)}).catch(function(e){var n;c(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.message)})}}),(0,o.jsx)(d.z,{type:"submit",color:"red",size:"large",mode:"filled",className:"w-full mt-6 mt-8-lg",isLoading:C,onClick:f,children:"ادامه"})]})};Z.propTypes={response:l().any,setStep:l().func,setResponse:l().func};var W=t(7969),U=t(8050),q=function(e){var n=e.className,t=(0,i.Z)((0,r.useState)(u.wN.auth),2),a=t[0],l=t[1],c=(0,i.Z)((0,r.useState)({}),2),d=c[0],p=c[1],m=(0,i.Z)((0,r.useState)(""),2),f={setStep:l,setResponse:p,response:d,username:m[0],setUsername:m[1]};return(0,o.jsxs)(U.p,{className:n,children:[(0,o.jsx)(W.G,{setStep:l,firstStep:u.wN.auth,hasBack:a!==u.wN.auth,logoHiddenInMobile:a!==u.wN.auth,isIconFixedMobile:!0}),function(){switch(a){case u.wN.auth:return(0,o.jsx)(y,(0,s.Z)({},f));case u.wN.password:return(0,o.jsx)(E,(0,s.Z)({},f));case u.wN.otp:return(0,o.jsx)(I,(0,s.Z)({},f));case u.wN.register:return(0,o.jsx)(Z,(0,s.Z)({},f));default:return null}}()]})};q.propTypes={className:l().string};var J=t(88589),F=(0,t(41701).D)({component:function(){return(0,o.jsx)(q,{})},redirectIfLogin:!0,layoutProps:{type:J.B.CENTER,justify:"center"}})},8050:function(e,n,t){"use strict";t.d(n,{p:function(){return l}});var r=t(47842),o=t(52322),s=t(72677),i=t(77997),a=t.n(i);function l(e){var n=e.children,t=e.className,i=e.width,l=(0,s.d)("border-200-lg radius-medium p-5 p-8-lg","d-flex flex-column ai-center jc-start jc-center-lg",(0,r.Z)({},a().AccountWrapper__mainBox,!i),i,t);return(0,o.jsx)("div",{className:l,children:n})}},90644:function(e,n,t){"use strict";t.d(n,{N:function(){return m}});var r=t(70865),o=t(26297),s=t(66383),i=t(52322),a=t(2784),l=t(72677),u=t(19757),c=t(73076),d=t(64167),p=t.n(d);function m(e){var n=e.onChange,t=e.error,d=e.name,m=e.codeLength,f=void 0===m?5:m,h=e.submit,v=e.inputWrapperProps,g=(0,o.Z)(e,["onChange","error","name","codeLength","submit","inputWrapperProps"]),x=(0,s.Z)((0,a.useState)(""),2),N=x[0],w=x[1],j=function(e){return null==e?void 0:e.replace(/[-]/g,"")},S=function(e){e.length===f&&setTimeout(function(){h()},0)};return(0,i.jsx)(u.I,(0,r.Z)({name:void 0===d?"code":d,onChange:function(e){var t=e.target.value;if(t.length<2*f-1){n(j((0,c.d)(t)));var r,o,s,i=null==t?void 0:null===(r=t.split)||void 0===r?void 0:null===(o=r.call(t,""))||void 0===o?void 0:null===(s=o.join)||void 0===s?void 0:s.call(o,"-");(i&&Number(j(i))||""===i)&&w(i)}S(t)},autoFocus:!0,maxLength:f+Math.round(f/2)+1,inputMode:"numeric",type:"text",inputClassName:(0,l.d)("align-center",p().codeInput__trackingOtp),value:N,error:t,inputWrapperProps:void 0===v?{fullWidth:!0}:v},g))}},64952:function(e,n,t){"use strict";t.d(n,{U:function(){return l}});var r=t(52322),o=t(98780),s=t(72677),i=t(82858),a=t(57931);function l(e){var n=e.error,t=e.endTime,l=e.onResend,u=e.isLoading,c=e.shouldHideOTPCall,d=e.buttonColor,p=e.descriptionColor,m=void 0===p?"color-700":p,f=(0,i.J)(t,{hasHours:!1}),h=function(){l({otpCall:!1})};return n?(0,r.jsx)("p",{className:(0,s.d)("w-full mt-4 align-center text-body-2 py-2",m),children:n}):t&&0!==f?(0,r.jsxs)("p",{className:(0,s.d)("w-full mt-4 align-center text-body-2 py-2",m),children:[(0,r.jsx)("span",{className:"w-10 d-inline-block mx-1 align-center",children:f}),"مانده تا دریافت مجدد کد"]}):void 0!==c&&c?(0,r.jsx)(a.z,{mode:"text",size:"small",color:void 0===d?"blue":d,onClick:h,isLoading:u,className:"mt-4 w-full",children:"دریافت مجدد کد تایید"}):(0,r.jsxs)("div",{className:"w-full d-flex ai-center jc-center mb-6 mt-4 text-caption user-select-none",children:["دریافت مجدد کد از طریق",(0,r.jsxs)("span",{onClick:h,className:"d-flex ai-center color-secondary-500 mx-2 pointer",children:["پیامک",(0,r.jsx)(o.J,{icon:"chevronLeft",size:20,color:"secondary"})]}),"یا",(0,r.jsxs)("span",{onClick:function(){l({otpCall:!0})},className:"d-flex ai-center color-secondary-500 mx-2 pointer",children:["تماس",(0,r.jsx)(o.J,{icon:"chevronLeft",size:20,color:"secondary"})]})]})}},82858:function(e,n,t){"use strict";t.d(n,{J:function(){return l}});var r=t(70865),o=t(66383),s=t(2784),i=t(50020),a=t(95846);function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,l=(0,r.Z)({hasMillieSeconds:!1},n).hasMillieSeconds,u=(0,s.useRef)(0),c=function(){return e<=Date.now()||(0,i.k)(e)?0:l?e-Date.now():Math.floor((e-Date.now())/1e3)},d=(0,o.Z)((0,s.useState)((0,a.R)(c(),n,u)),2),p=d[0],m=d[1];return(0,s.useEffect)(function(){return c()>0&&(u.current=setInterval(function(){var r=Math.floor((e-Date.now())/1e3);r<=0&&(null==t||t()),m((0,a.R)(r,n,u))},1e3)),function(){return clearInterval(u.current)}},[e]),p}},41701:function(e,n,t){"use strict";function r(e){var n=e.component,t=e.getAPIMethods,r=e.layoutProps,o=e.isPrivate,s=e.noDefaultLoader,i=e.pageActivatorFeature,a=e.redirectIfLogin,l=e.afterLogin,u=e.disableSSR,c=e.dataProps;return n.getAPIMethods=t,n.layoutProps=r,n.isPrivate=o,n.noDefaultLoader=s,n.pageActivatorFeature=i,n.redirectIfLogin=a,n.afterLogin=l,n.disableSSR=u,n.dataProps=c,n}t.d(n,{D:function(){return r}})},95846:function(e,n,t){"use strict";t.d(n,{R:function(){return s}});var r=t(52216),o={MILLISECOND:"میلی ثانیه",SECOND:"ثانیه",MINUTE:"دقیقه",HOUR:"ساعت",DAY:"روز"};function s(e,n,t){var s=n.hasHours,i=n.hasDays,a=void 0===i||i,l=n.hasMilliseconds,u=void 0!==l&&l,c=n.isArray,d=n.hasText;if(e<=0)return(null==t?void 0:t.current)&&clearInterval(t.current),0;var p=[];if(u){var m=String(e%1e3||0).padStart(3,"0");p.push({text:o.MILLISECOND,value:m})}var f=(x=(g={time:e,hasMilliseconds:u}).time,String((void 0!==(N=g.hasMilliseconds)&&N?Math.floor(x/1e3)%60:x%60)||0).padStart(2,"0")),h=(j=(w={time:e,hasMilliseconds:u}).time,String((void 0!==(S=w.hasMilliseconds)&&S?Math.floor(j/6e4%60):Math.floor(j/60%60))||0).padStart(2,"0"));if(p.push({text:o.SECOND,value:f},{text:o.MINUTE,value:h}),void 0===s||s){var v=(b=(y={time:e,hasMilliseconds:u,hasDays:a}).time,M=y.hasDays,_=Math.floor((y.hasMilliseconds?Math.floor(b/1e3):b)/3600),M?String(_%24||0).padStart(2,"0"):String(_||0).padStart(2,"0"));if(p.push({text:o.HOUR,value:v}),(!u&&e>86400||u&&e>864e5)&&a){var g,x,N,w,j,S,y,b,M,_,C,P,R,L=(P=(C={time:e,hasMilliseconds:u}).time,void 0!==(R=C.hasMilliseconds)&&R?String(Math.floor(P/864e5)||0):String(Math.floor(P/86400)||0));p.push({text:o.DAY,value:L})}}return void 0!==d&&d?p:void 0!==c&&c?p.map(function(e){return e.value}):(0,r.U)(p.map(function(e){return e.value}).join(" : ").replace(u?/:([^.]+)$/:"",u?".$1":""))}},77997:function(e){e.exports={AccountWrapper__mainBox:"account-wrapper_AccountWrapper__mainBox__cC78z"}},64167:function(e){e.exports={codeInput__trackingOtp:"code-input_codeInput__trackingOtp__XlLkF"}}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=19401)}),_N_E=e.O()}]);